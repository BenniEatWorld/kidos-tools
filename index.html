<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Kidos Tools</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="gfx/Kidos-logo.png" />
  <link rel="stylesheet" href="css/main.css" />
  <script src="js/header-loader.js"></script>
</head>
<body>
  <div class="app-container">
    <!-- Header Container -->
    <div id="header-container"></div>

    <!-- Main Content -->
    <main class="main-content" id="main-content" style="display: none;">
      <div class="content-wrapper">
        <h1 class="page-title">Kidos Tools</h1>
        <p class="page-description">
          Professionelle Tools f√ºr Erzieher*innen. 
          Hier findest du Apps, um dir Zeit zu sparen, die du nicht hast.<br>
          Nutze meine Tools, um administrative Aufgaben zu vereinfachen. Damit du dich auf das
          Wesentliche konzentrieren kannst.
        </p>

        <!-- Tools Grid -->
        <div class="tools-grid">
        
        <!-- Tool 1: Entwicklungsbericht -->
        <div class="tool-card" onclick="openTool('entwicklungsbericht')">
          <div class="tool-icon">üìã</div>
          <h3 class="tool-title">Entwicklungsbericht</h3>
          <p class="tool-description">
            Erstelle individuelle, kompetenzorientierte Entwicklungsberichte f√ºr Kinder in der Kita. 
            Dokumentiert anschaulich Fortschritte in allen wichtigen Entwicklungsbereichen.
          </p>
          <span class="tool-status status-ready">Bereit</span>
        </div>

        <!-- Tool 2: Entwicklungseinsch√§tzung -->
        <div class="tool-card" onclick="openTool('entwicklungseinschaetzung')">
          <div class="tool-icon">üîç</div>
          <h3 class="tool-title">Entwicklungseinsch√§tzung</h3>
          <p class="tool-description">
            Spezialisierte Einsch√§tzung f√ºr soziales, emotionales Verhalten 
            und ADHS/ADS/ASS-Screening.
          </p>
          <span class="tool-status status-planned">Geplant</span>
        </div>

        <!-- Test-Karten f√ºr Scroll-Test -->
        <div class="tool-card">
          <div class="tool-icon">üè´</div>
          <h3 class="tool-title">Einschulungs-Einsch√§tzung</h3>
          <p class="tool-description">
            Entwicklungseinsch√§tzung zur Einschulung: Kompetenzen, Entwicklungsstand und F√∂rderbedarf f√ºr den √úbergang in die Schule.
          </p>
          <span class="tool-status status-planned">Geplant</span>
        </div>

        <div class="tool-card">
          <div class="tool-icon">üê¶</div>
          <h3 class="tool-title">BeoKiz MS 1</h3>
          <p class="tool-description">
            BeoKiz Meilenstein 1:<br>
            Das neue Beobachtungssystem f√ºr Berliner Kitas. Dokumentation und Einsch√§tzung des ersten
            Entwicklungsmeilensteins.
          </p>
          <span class="tool-status status-planned">Geplant</span>
        </div>

        <div class="tool-card">
          <div class="tool-icon">üê¶</div>
          <h3 class="tool-title">BeoKiz MS 2</h3>
          <p class="tool-description">
            BeoKiz Meilenstein 2:<br>
            Das neue Beobachtungssystem f√ºr Berliner Kitas. Dokumentation und Einsch√§tzung des zweiten
            Entwicklungsmeilensteins.
          </p>
          <span class="tool-status status-planned">Geplant</span>
        </div>

        <div class="tool-card">
            <div class="tool-icon">üí¨</div>
          <h3 class="tool-title">Sprachstand</h3>
          <p class="tool-description">
            Sprachstandserhebung:<br>
            Sprachstand nach den Berliner Standards:<br>
            Beobachtung und Dokumentation der sprachlichen Entwicklung gem√§√ü Berliner Bildungsprogramm.
            Einsch√§tzung des Sprachstands f√ºr gezielte F√∂rderung und √úbergangsempfehlungen.
          </p>
          <span class="tool-status status-planned">Geplant</span>
        </div>

        
      </div>
    </main>

    <!-- Login Modal -->
    <div id="login-modal" class="login-modal-bg">
      <div class="login-modal-box">
        <div class="login-modal-logo">
          <img src="gfx/Kidos-logo.png" alt="Kidos Logo" class="modal-logo-image" />
        </div>
        <h2 class="login-modal-title">Kidos Tools Login</h2>
        <p class="login-modal-text">Bitte gib das Passwort ein, um die Tools zu nutzen.</p>
        <input id="pw-input" type="password" placeholder="Passwort" autocomplete="current-password" onkeydown="if(event.key==='Enter'){checkPassword();}" />
        <div id="pw-error" class="login-error"></div>
        <button onclick="checkPassword()" class="login-submit-btn">Login</button>
        <div class="login-modal-footer">
          <a href="https://www.benjamingeisler.de/kontakt/mitglied-kidos-tools/" target="_blank" rel="noopener noreferrer" class="login-modal-link">Mitglied werden</a>
        </div>
      </div>
    </div>

    <!-- Footer Container -->
    <div id="footer-container"></div>
  </div>

  <script>
    // Login-Funktionalit√§t
    let isLoggedIn = false;
    const correctPasswordHash = 'a87dc46c10998d49038499595ea919acf69a290eba2fa756d4e9fcb0ea10e257'; // "hello" in SHA256

    function checkPassword() {
      const input = document.getElementById('pw-input');
      const error = document.getElementById('pw-error');
      
      if (!input || !error) return;
      
      const password = input.value.trim();
      
      if (!password) {
        error.textContent = 'Bitte geben Sie ein Passwort ein.';
        return;
      }
      
      // SHA256 Hash des eingegebenen Passworts
      crypto.subtle.digest('SHA-256', new TextEncoder().encode(password))
        .then(hashBuffer => {
          const hashArray = Array.from(new Uint8Array(hashBuffer));
          const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
          
          if (hashHex === correctPasswordHash) {
            error.textContent = '';
            isLoggedIn = true;
            document.getElementById('login-modal').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            input.value = '';
          } else {
            error.textContent = 'Falsches Passwort.';
            input.focus();
          }
        });
    }

    // Tool-Navigation (nur wenn eingeloggt)
    function openTool(toolId) {
      if (!isLoggedIn) {
        alert('Bitte loggen Sie sich zuerst ein.');
        return;
      }
      
      console.log('Opening tool:', toolId);
      
      // Sichere Navigation zu Tools
      const toolUrls = {
        'entwicklungsbericht': 'tools/entwicklungsbericht.html',
        'entwicklungseinschaetzung': 'tools/entwicklungseinschaetzung.html'
      };
      
      if (toolUrls[toolId]) {
        // Sichere Weiterleitung mit Login-Token
        const loginToken = btoa(Date.now().toString());
        sessionStorage.setItem('kidos_login_token', loginToken);
        window.location.href = toolUrls[toolId] + '?token=' + loginToken;
      } else {
        alert('Tool nicht gefunden.');
      }
    }

    // Initialisierung
    document.addEventListener('DOMContentLoaded', function() {
      // Fokus auf Passwort-Eingabe
      const input = document.getElementById('pw-input');
      if (input) input.focus();
    });

    console.log('Kidos Tools initialized with login protection');
  </script>
</body>
</html>
